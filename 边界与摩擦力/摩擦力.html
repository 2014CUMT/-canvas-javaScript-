<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>摩擦力</title>
</head>
<body>
	<canvas id="canvas" width="500" height="400" style="background:black;display:block;margin: auto"></canvas>
	<script type="text/javascript" src="../object/ball.js"></script>
	<script type="text/javascript" src="../wheel/utils.js"></script>
	<script type="text/javascript">
		window.onload=function(){
			var canvas=document.getElementById("canvas");
				context=canvas.getContext("2d");
				ball=new Ball(50,"#479AC7");
				ball.x=canvas.width/2;
				ball.y=canvas.height/2;
				ball.vx=Math.random()*16-8;
				ball.vy=Math.random()*14-7;
				friction=-0.1;
				(function drawFrame(){
					window.requestAnimationFrame(drawFrame,canvas);
					context.clearRect(0,0,canvas.width,canvas.height);
					var angle=Math.atan2(ball.vy,ball.vx);
					var speed=Math.sqrt(ball.vx*ball.vx+ball.vy*ball.vy);
					speed+=friction;
					if(speed<=0){
						speed=0;
					}
					ball.vx=speed*Math.cos(angle);
					ball.vy=speed*Math.sin(angle);
					ball.x+=ball.vx;
					ball.y+=ball.vy;
					ball.draw(context);
				}());
		}
	</script>
</body>
</html>